# render.yaml - Render Blueprint for CI4 + MySQL
# Put this at the repo root: render.yaml

# global plan (optional)
plan: starter

services:
  - type: web_service
    name: ci4-mysql
    env: docker
    repo: https://github.com/SanketNaykal/ci4.git
    branch: master
    dockerfilePath: Dockerfile
    image: mysql:8.0    # official MySQL image; change to mysql:5.7 if needed
    spec:
      plan: standard
      disks:
        - name: mysql-data
          mountPath: /var/lib/mysql
          sizeGb: 10
    envVars:
      - key: MYSQL_ROOT_PASSWORD
        sync: false     # secret — Render will prompt for this value on creation
      - key: MYSQL_DATABASE
        value: ci4db
      - key: MYSQL_USER
        value: ci4user
      - key: MYSQL_PASSWORD
        sync: false     # secret — Render will prompt for this value on creation

  - type: web_service
    name: ci4-web
    env: docker
    repo: https://github.com/SanketNaykal/ci4.git
    branch: master
    dockerfilePath: Dockerfile
    spec:
      plan: starter
      region: oregon
      envVars:
        # We leave DB_HOST blank so you're prompted to paste the private service host,
        # or you can fill it from the MySQL service details after creation.
        - key: DB_HOST
          sync: false
        - key: DB_PORT
          value: "3306"
        - key: DB_USERNAME
          value: ci4user
        - key: DB_PASSWORD
          sync: false
        - key: DB_DATABASE
          value: ci4db
      buildCommand: ""   # optional: leave blank so Dockerfile controls build
      startCommand: ""   # optional: container's CMD will be used

# (Optional) enable generation of preview environments:
previews:
  generation: automatic
