# render.yaml - Render Blueprint for CI4 + MySQL
# Put this at the repo root: render.yaml

plan: starter

services:
  - type: private_service
    name: ci4-mysql
    env: docker
    repo: https://github.com/SanketNaykal/ci4.git
    branch: master
    image: mysql:8.0
    spec:
      plan: standard
      disks:
        - name: mysql-data
          mountPath: /var/lib/mysql
          sizeGb: 10
    envVars:
      - key: MYSQL_ROOT_PASSWORD
        sync: false
      - key: MYSQL_DATABASE
        value: ci4db
      - key: MYSQL_USER
        value: ci4user
      - key: MYSQL_PASSWORD
        sync: false

  - type: web_service
    name: ci4-web
    env: docker
    repo: https://github.com/SanketNaykal/ci4.git
    branch: master
    dockerfilePath: Dockerfile
    spec:
      plan: starter
      region: oregon
      envVars:
        - key: DB_HOST
          sync: false
        - key: DB_PORT
          value: "3306"
        - key: DB_USERNAME
          value: ci4user
        - key: DB_PASSWORD
          sync: false
        - key: DB_DATABASE
          value: ci4db
      buildCommand: ""
      startCommand: ""

previews:
  generation: automatic
